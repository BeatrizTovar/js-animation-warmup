<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="circle-animation.css" />

    <title>Circle Animation</title>
  </head>
  <body>
    <h1>Circles Animation</h1>
    <div id="container">
      <canvas id="myCanvas" height="400" width="400"></canvas>
    </div>
    <div>
      <input type="text" id="red" value="" />
      <button type="button" onclick="submitValue('red')" id="submitButton">
        R
      </button>
      <input type="text" id="blue" value="" />
      <button type="button" onclick="submitValue('blue')" id="submitButton">
        B
      </button>
      <input type="text" id="green" value="" />
      <button type="button" onclick="submitValue('green')" id="submitButton">
        G
      </button>
      <input type="text" id="opacity" value="" />
      <button type="button" onclick="submitValue('opacity')" id="submitButton">
        O
      </button>
    </div>

    <script>
      function submitValue(input) {
        let value = document.getElementById(input).value;
        console.log(value);
      }

      // --------------------CIRCLES--------------------
      //Reference to HtmlElement - #myCanvas -
      let mainCanvas = document.getElementById("myCanvas");

      //Element's context where the drawing will be rendered (CanvasRenderdingContext2D)
      let mainContext = mainCanvas.getContext("2d");

      let canvasWidth = mainCanvas.width;
      let canvasHeight = mainCanvas.height;

      let requestAnimationFrame =
        window.requestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.msRequestAnimationFrame;

      let circles = new Array();

      function Circle(angle, sign, radius, rotationRadius, initialX, initialY) {
        this.angle = angle;
        this.sign = sign;
        this.radius = radius;
        this.rotationRadius = rotationRadius;
        this.initialX = initialX;
        this.initialY = initialY;
        this.incrementer = 0.01 + Math.random() * 0.1;
      }

      Circle.prototype.update = function() {
        this.angle += this.incrementer;

        this.currentX =
          this.initialX + this.rotationRadius * Math.cos(this.angle);
        this.currentY =
          this.initialY + this.rotationRadius * Math.sin(this.angle);

        if (this.angle >= Math.PI * 2) {
          this.angle = 0;
          this.incrementer = 0.01 + Math.random() * 0.1;
        }

        mainContext.beginPath();
        mainContext.arc(
          this.currentX,
          this.currentY,
          this.radius,
          0,
          Math.PI * 2,
          false
        );

        let one = Math.floor(Math.random() * 100);
        let two = Math.floor(Math.random() * 150);
        let three = Math.floor(Math.random() * 200);
        console.log(one, two, three);
        mainContext.closePath();
        mainContext.fillStyle = `rgba(${three}, ${one}, ${two}, .3)`;
        mainContext.fill();
      };

      function createCircles() {
        for (let i = 0; i < 50; i++) {
          let radius = 5 + Math.random() * 40;
          let initialX = canvasWidth / 2;
          let initialY = canvasHeight / 2;
          let rotationRadius = 1 + Math.random() * 30;
          let angle = Math.random() * 2 * Math.PI;

          let signHelper = Math.floor(Math.random() * 2);
          let sign = 0;

          if (signHelper == 1) {
            sign = -1;
          } else {
            sign = 1;
          }

          let circle = new Circle(
            angle,
            sign,
            radius,
            rotationRadius,
            initialX,
            initialY
          );

          circles.push(circle);
        }

        requestAnimationFrame(draw);
      }

      createCircles();
      function draw() {
        //clears a rectangular area starting at x,y,width, height sets to transparent black
        mainContext.clearRect(0, 0, canvasWidth, canvasHeight);

        // fills the rectanfular area with a color, gradient, or pattern
        mainContext.fillStyle = "#f6f6f6";

        //fills a rectangular area starting and x, y, widht, height
        mainContext.fillRect(0, 0, canvasWidth, canvasHeight);

        for (let i = 0; i < circles.length; i++) {
          let circle = circles[i];
          circle.update();
        }

        // requestAnimationFrame(draw);
      }
    </script>
  </body>
</html>
